#--------------------------------------------*-cmake-*---------------------------------------------#
#
# file   kde/test/CMakeLists.txt
# author Mathew Cleveland
# date   Nov. 10th 2020
# brief  CMake configuration for KDE tests
# note   Copyright (C) 2021-2022 Triad National Security, LLC., All rights reserved.
#--------------------------------------------------------------------------------------------------#
cmake_minimum_required(VERSION 3.21.0)
project(kde_test CXX)

# ------------------------------------------------------------------------------------------------ #
# Source files
# ------------------------------------------------------------------------------------------------ #
file(GLOB test_sources *.cc)

# ------------------------------------------------------------------------------------------------ #
# Build Unit tests
# ------------------------------------------------------------------------------------------------ #
if(MSVC)
  # MSMPI fails for MPI_Win_fence.
  set(pe_list "1")
else()
  set(pe_list "1;3")
endif()
add_parallel_tests(
  SOURCES "${test_sources}"
  DEPS Lib_kde
  PE_LIST ${pe_list})

# ------------------------------------------------------------------------------------------------ #
# end kde/test/CMakeLists.txt
# ------------------------------------------------------------------------------------------------ #
